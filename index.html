<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>

  <title>LRU Cache Visualizer | Interactive LRU Cache Simulation</title>

  <meta name="description" content="Understand and visualize LRU Cache with interactive PUT and GET operations. Simple, clean, and professional LRU Cache visualization tool.">
  <meta name="keywords" content="LRU Cache, LRU Cache Visualization, Cache Simulator, LRU Algorithm">
  <meta name="author" content="LRU Cache Visualizer">

  <style>
    * {
      box-sizing: border-box;
      font-family: system-ui, -apple-system, BlinkMacSystemFont, "Segoe UI", sans-serif;
    }

    body {
      margin: 0;
      background: #f8fafc;
      color: #020617;
    }

    header {
      background: #0f172a;
      color: white;
      padding: 16px;
      text-align: center;
      font-size: 20px;
      font-weight: 600;
    }

    main {
      display: grid;
      grid-template-columns: 2.2fr 1fr;
      height: calc(100vh - 64px);
    }

    /* LEFT SIDE */
    .workspace {
      padding: 32px;
      display: flex;
      flex-direction: column;
      align-items: center;
    }

    .controls {
      display: flex;
      gap: 10px;
      margin-bottom: 16px;
      flex-wrap: wrap;
      justify-content: center;
    }

    input {
      padding: 8px 12px;
      border-radius: 6px;
      border: 1px solid #cbd5e1;
      font-size: 14px;
    }

    button {
      padding: 8px 16px;
      border-radius: 6px;
      border: none;
      background: #2563eb;
      color: white;
      font-size: 14px;
      cursor: pointer;
    }

    button:hover {
      background: #1e40af;
    }

    button.reset {
      background: #dc2626;
    }

    button.reset:hover {
      background: #b91c1c;
    }

    .cache-section {
      margin-top: 32px;
      width: 100%;
      display: flex;
      flex-direction: column;
      align-items: center;
    }

    .cache-labels {
      width: 70%;
      display: flex;
      justify-content: space-between;
      font-size: 13px;
      color: #64748b;
      margin-bottom: 8px;
    }

    .cache {
      display: flex;
      justify-content: center;
      gap: 12px;
      min-height: 90px;
    }

    .cache-box {
      width: 90px;
      height: 60px;
      border-radius: 8px;
      border: 2px dashed #cbd5e1;
      background: #ffffff;
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: center;
      font-size: 13px;
      transition: transform 0.3s ease, background 0.3s ease;
    }

    .filled {
      border-style: solid;
      border-color: #2563eb;
      background: #eff6ff;
    }

    /* RIGHT SIDE */
    aside {
      border-left: 1px solid #e5e7eb;
      padding: 20px;
      overflow-y: auto;
      background: #ffffff;
    }

    aside h2 {
      margin-top: 0;
      font-size: 16px;
    }

    .log {
      background: #f1f5f9;
      padding: 8px;
      border-radius: 6px;
      font-size: 13px;
      margin-bottom: 8px;
    }
  </style>
</head>

<body>

<header>LRU Cache Visualization</header>

<main>

  <!-- LEFT -->
  <section class="workspace">

    <!-- Initialize + Reset -->
    <div class="controls">
      <input type="number" id="cacheSize" placeholder="Cache Size" min="1">
      <button onclick="initialize()">Initialize Cache</button>
      <button class="reset" onclick="resetCache()">Reset</button>
    </div>

    <!-- PUT -->
    <div class="controls">
      <input id="putKey" placeholder="PUT Key">
      <input id="putValue" placeholder="PUT Value">
      <button onclick="put()">PUT</button>
    </div>

    <!-- GET -->
    <div class="controls">
      <input id="getKey" placeholder="GET Key">
      <button onclick="get()">GET</button>
    </div>

    <!-- CACHE -->
    <div class="cache-section">
      <div class="cache-labels">
        <span>Most Recently Used</span>
        <span>Least Recently Used</span>
      </div>
      <div class="cache" id="cache"></div>
    </div>

  </section>

  <!-- RIGHT -->
  <aside>
    <h2>History</h2>
    <div id="history"></div>
  </aside>

</main>

<script>
  let capacity = 0;
  let cache = [];

  function initialize() {
    capacity = parseInt(document.getElementById("cacheSize").value);
    if (!capacity || capacity <= 0) return;

    cache = new Array(capacity).fill(null);
    document.getElementById("history").innerHTML = "";
    log(`Cache initialized with size ${capacity}`);
    render();
  }

  function resetCache() {
    if (!capacity) return;
    cache = new Array(capacity).fill(null);
    document.getElementById("history").innerHTML = "";
    log("Cache reset");
    render();
  }

  function put() {
    const key = document.getElementById("putKey").value;
    const value = document.getElementById("putValue").value;
    if (!key || !value) return;

    cache = cache.filter(item => item && item.key !== key);

    if (cache.length === capacity) {
      const removed = cache.pop();
      log(`Evicted ${removed.key}`);
    }

    cache.unshift({ key, value });
    log(`PUT (${key}, ${value})`);
    render();
  }

  function get() {
    const key = document.getElementById("getKey").value;
    const index = cache.findIndex(item => item && item.key === key);

    if (index === -1) {
      log(`GET ${key} → Miss`);
      return;
    }

    const item = cache.splice(index, 1)[0];
    cache.unshift(item);
    log(`GET ${key} → Hit`);
    render();
  }

  function render() {
    const el = document.getElementById("cache");
    el.innerHTML = "";

    for (let i = 0; i < capacity; i++) {
      const box = document.createElement("div");
      box.className = "cache-box";

      if (cache[i]) {
        box.classList.add("filled");
        box.innerHTML = `<strong>${cache[i].key}</strong><small>${cache[i].value}</small>`;
      }

      el.appendChild(box);
    }
  }

  function log(msg) {
    const h = document.getElementById("history");
    const div = document.createElement("div");
    div.className = "log";
    div.textContent = msg;
    h.prepend(div);
  }
</script>

</body>
</html>
